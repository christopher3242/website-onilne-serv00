<!DOCTYPE html>
<html lang="en">
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,
      initial-scale=1.0">
    <title>European Roulette Game</title>
    <style>
  body {
    font-family: Arial, sans-serif;
    background-color: #2b2b2b;
    color: #fff;
    text-align: center;
    margin: 0;
    padding: 20px;
  }
  h1 {
    margin-bottom: 10px;
  }
  #balance {
    font-size: 1.2em;
    margin-bottom: 20px;
  }
  #bet-section {
    margin-bottom: 20px;
  }
  #bet-section input[type="number"] {
    width: 60px;
    padding: 5px;
    margin-right: 10px;
  }
  #bet-section select {
    padding: 5px;
    margin-right: 10px;
  }
  #buttons-container button {
    margin: 5px;
    padding: 10px 15px;
    font-size: 1em;
    cursor: pointer;
  }
  #spin-btn {
    padding: 10px 20px;
    font-size: 1em;
    cursor: pointer;
  }
  #result {
    margin-top: 20px;
    font-size: 1.2em;
  }
  #wheel-container {
    margin: 30px auto;
    width: 350px;
    height: 350px;
    position: relative;
  }
  #wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 10px solid #444;
    box-sizing: border-box;
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    background: conic-gradient(
      /* Green for 0 */
      #00FF00 0deg 9.72deg,
      /* Red & Black segments for 1-36, each roughly 9.72 degrees */
      /* For simplicity, alternating colors */
      /* Generate segments dynamically in script for accuracy */
      /* We'll generate in script for accuracy */
      transparent
    );
  }
  #pointer {
    position: absolute;
    top: -10px;
    left: calc(50% - 10px);
    width: 20px;
    height: 20px;
    background-color: yellow;
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    z-index: 10;
  }
</style>
  </head>
  <body>
    <h1>European Roulette</h1>
    <div id="balance">Balance: €<span id="balance-amount">1000</span></div>
    <div id="bet-section"> <label>Bet Amount: €</label> <input
        id="bet-amount" min="1" max="1000" value="10" type="number"> <br>
      <br>
      <label>Bet Type:</label>
      <select id="bet-type">
        <option value="number" selected="selected">Number</option>
        <option value="red">Red</option>
        <option value="black">Black</option>
        <option value="even">Even</option>
        <option value="odd">Odd</option>
        <option value="green">Green</option>
      </select>
      <br>
      <br>
      <div id="number-bet-container" style="display:none;"> <label>Number
          (0-36):</label> <input id="number-bet" min="0" max="36"
          type="number"> </div>
    </div>
    <div class="buttons-container"> <button id="spin-btn">Spin</button>
      <button id="add-50-btn">Add €50</button> <a href="../Games.html"><button
          id="exit-btn">Exit</button></a>
    </div>
    <div id="wheel-container">
      <div id="pointer"></div>
      <div id="wheel"></div>
    </div>
    <div id="result"></div>
    <script>
const balanceSpan = document.getElementById('balance-amount');
const betAmountInput = document.getElementById('bet-amount');
const betTypeSelect = document.getElementById('bet-type');
const numberBetContainer = document.getElementById('number-bet-container');
const numberBetInput = document.getElementById('number-bet');
const spinBtn = document.getElementById('spin-btn');
const add50Btn = document.getElementById('add-50-btn');
const exitBtn = document.getElementById('exit-btn');
const resultDiv = document.getElementById('result');
const wheel = document.getElementById('wheel');

let balance = 1000;
let isSpinning = false;

// Show/hide number input based on bet type
betTypeSelect.addEventListener('change', () => {
  if (betTypeSelect.value === 'number') {
    numberBetContainer.style.display = 'block';
  } else {
    numberBetContainer.style.display = 'none';
  }
});

// Add €50
document.getElementById('add-50-btn').addEventListener('click', () => {
  balance += 50;
  updateBalance();
});

// Exit resets game
exitBtn.addEventListener('click', () => {
  balance = 1000;
  updateBalance();
  resultDiv.textContent = 'Game reset!';
});

// Main spin button
document.getElementById('spin-btn').addEventListener('click', () => {
  if (isSpinning) return;
  const betAmount = parseFloat(betAmountInput.value);
  if (isNaN(betAmount) || betAmount <= 0 || betAmount > balance) {
    alert('Invalid bet amount');
    return;
  }

  let betType = betTypeSelect.value;
  let betNumber = null;
  if (betType === 'number') {
    betNumber = parseInt(numberBetInput.value);
    if (isNaN(betNumber) || betNumber < 0 || betNumber > 36) {
      alert('Enter a valid number between 0 and 36');
      return;
    }
  }

  // Deduct bet
  balance -= betAmount;
  updateBalance();
  spinWheel(betType, betNumber, betAmount);
});

function updateBalance() {
  balanceSpan.textContent = balance.toFixed(2);
}

// Wheel segments setup
const segments = [];
// Segment for 0 (green)
segments.push({number: 0, color: 'green', startDeg: 0, endDeg: 9.72});
// Generate for 1-36, alternating red/black
const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

let currentDeg = 9.72;
for (let n=1; n<=36; n++) {
  const color = redNumbers.includes(n) ? 'red' : 'black';
  segments.push({number: n, color: color, startDeg: currentDeg, endDeg: currentDeg + 9.72});
  currentDeg += 9.72;
}

// Function to generate conic-gradient string based on segments
function generateGradient() {
  return segments.map(seg => {
    const colorHex = seg.color === 'green' ? '#00FF00' : (seg.color === 'red' ? '#FF0000' : '#000000');
    return `${colorHex} ${seg.startDeg}deg ${seg.endDeg}deg`;
  }).join(', ');
}

// Initialize wheel background
function setWheelBackground() {
  wheel.style.background = `conic-gradient(${generateGradient()})`;
}
setWheelBackground();

// Function to spin the wheel
function spinWheel(betType, betNumber, betAmount) {
  isSpinning = true;
  resultDiv.textContent = '';

  const totalDegrees = 360;
  const fullRotations = 4; // number of full spins
  const randomSegmentIndex = Math.floor(Math.random() * segments.length);
  const targetSegment = segments[randomSegmentIndex];

  // Calculate target angle so that pointer lands in the middle of the segment
  const segmentMidDeg = (targetSegment.startDeg + targetSegment.endDeg) / 2;
  const stopAngle = fullRotations * 360 + (360 - segmentMidDeg);

  // Animate rotation
  wheel.style.transition = 'transform 4s cubic-bezier(0.33, 1, 0.68, 1)';
  wheel.style.transform = `rotate(${stopAngle}deg)`;

  // After spin ends
  wheel.addEventListener('transitionend', () => {
    // Determine if player wins
    const number = targetSegment.number;
    const color = targetSegment.color;
    const isEven = number !== 0 && number % 2 === 0;

    let wins = false;
    if (betType === 'number') {
      wins = (betNumber === number);
    } else if (betType === 'red') {
      wins = (color === 'red');
    } else if (betType === 'black') {
      wins = (color === 'black');
    } else if (betType === 'even') {
      wins = (number !== 0 && isEven);
    } else if (betType === 'odd') {
      wins = (number !== 0 && !isEven);
    } else if (betType === 'green') {
      wins = (color === 'green');
    }

    let payout = 0;
    if (wins) {
      payout = (betType === 'number') ? betAmount * 35 : betAmount;
      balance += payout + betAmount; // Return bet + winnings
      resultDiv.textContent = `Winning Number: ${number} (${color}). You win €${payout.toFixed(2)}!`;
    } else {
      resultDiv.textContent = `Winning Number: ${number} (${color}). You lose.`;
    }
    updateBalance();
    isSpinning = false;
  }, { once: true });
}
</script>
  </body>
</html>
